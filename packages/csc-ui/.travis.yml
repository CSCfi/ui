language: node_js

node_js: '16'

cache: npm

git:
  depth: false

branch:
  only:
    - master

script: 'true'

before_deploy:
  - git fetch --unshallow --tags
  - npm install
  - npm run build
  - npm run style-dictionary:build:prod

deploy:
  - provider: script
    script: if [ "$GH_TOKEN" != "false" ];then npx auto latest; fi;
    skip-cleanup: true
    on:
      branch: master

after_deploy:
  - npm run deploy:documentation
